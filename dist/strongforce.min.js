/**
 * @license
 * strongforce - v0.1.0
 * Copyright (c) 2014, Salvador de la Puente
 * https://github.com/lodr/strongforce
 *
 * Compiled: 2014-04-25
 *
 * strongforce is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
!function(a,b){var c,d;"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():(c=a.strongforce,d=b(),a.strongforce=d,a.strongforce.restore=function(){return a.strongforce=c,d})}(this,function(){"use strict";function a(a,e,f){var g=b(e),h=f.apply(void 0,g);d[c(a)]=h}function b(a){return a.map(function(a){return d[c(a)]})}function c(a){return 0===a.indexOf("./")?a.substring(2):a}var d={};return a("consts",[],function(){return{NOOP:function(){},IS_PRECALL:!1,IS_POSTCALL:!0}}),a("Loop",[],function(){function a(a){function d(){u||(f(0),h())}function f(a){g(),o=a||0,q=void 0,s=0}function g(){r=Date.now(),u=!1}function h(){u||(e(j),u=!0)}function i(a){a=a||v.simulationDelta,u||j(void 0,a)}function j(a,b){var c;if(u){e(j),p=Date.now(),void 0===q&&(q=p),c=p-q,q=p,x+=(c-x)/20;var d=Math.min(void 0!==b?b:c,v.maxSimulationTime);s+=d;for(var f=v.simulationDelta||s;s>=f;)l(w,o,f,m),n(),o+=f,s-=f;var g=s/f;k(w,g),t=Date.now()}}function k(a,b){a.traverse("render","getRenderSubmodels",[b])}function l(a,b,c,d){a.traverse("simulate","getSimulateSubmodels",[b,c,d])}function m(a){y.push(a)}function n(){for(;y.length;)y.shift()()}b(a);var o,p,q,r,s,t,u=!1,v=c(a),w=v.rootModel,x=0,y=[];return Object.defineProperty(this,"rootModel",{value:w}),{start:d,reset:f,pause:g,resume:h,step:i,get frameTime(){return x}}}function b(a){if(void 0===a.rootModel)throw new Error("The `rootModel` key is mandatory!")}function c(a){var b={};for(var c in d)d.hasOwnProperty(c)&&(b[c]=a[c]||d[c]);return b}var d={rootModel:void 0,maxSimulationTime:300,simulationDelta:10},e=window.requestAnimationFrame;return a}),a("Render",["./consts"],function(a){function b(){}var c=a.NOOP,d=a.IS_PRECALL,e=a.IS_POSTCALL;return b.prototype.apply=function(a,b){var c=b[0],d=[a].concat(b.slice(1));this[c?"postRender":"render"].apply(this,d)},b.prototype.render=c,b.prototype.postRender=c,b.prototype.delegateToRender=function(a){var b=[d].concat(Array.prototype.slice.call(arguments,1));a.render.apply(a,b)},b.prototype.delegateToPostRender=function(a){var b=[e].concat(Array.prototype.slice.call(arguments,1));a.postRender.apply(a,b)},b}),a("Simulator",["./consts"],function(a){function b(){}var c=a.NOOP;return b.prototype.apply=function(a,b){b=b||[];var c=b[0],d=[a].concat(b.slice(1));this[c?"postSimulate":"simulate"].apply(this,d)},b.prototype.simulate=c,b.prototype.postSimulate=c,b}),a("EventEmitter",[],function(){function a(){Object.defineProperty(this,"_listeners",{value:{}})}return a.prototype.dispatchEvent=function(a,b){b=b||{},b.type=a,b.target=this,b.timestamp=Date.now(),this._runListeners(a,b)},a.prototype._runListeners=function(a,b){var c=this._listeners[a]||[],d=[];c.forEach(function(a){var c=a[0],e=a[1];c(b),e||d.push(a)}),this._listeners[a]=d},a.prototype.addEventListener=function(a,b,c){function d(a){return a[0]===b}var e=this._listeners,f=e[a]=e[a]||[];f.some(d)||f.push([b,c])},a.prototype.removeEventListener=function(a,b){for(var c,d=this._listeners,e=d[a]=d[a]||[],f=-1,g=0;(c=e[g])&&0>f;g++)c[0]===b&&(f=g);-1!==f&&d[a].splice(f,1)},a.prototype.removeAllEventListener=function(a){this._listeners[a]=[]},a}),a("Model",["./consts","./EventEmitter"],function(a,b){function c(){b.apply(this),Object.defineProperty(this,"id",{value:d++}),c.setupFacets(this,[].slice.call(arguments,0))}var d=1,e=a.IS_PRECALL,f=a.IS_POSTCALL,g=a.NOOP,h=b.prototype;for(var i in h)h.hasOwnProperty(i)&&(c.prototype[i]=h[i]);return c.setupFacets=function(a,b){var d,e,f,g;g=c.facets;for(var h,i=0;h=g[i];i++)e=a[h].prototype,d=e&&void 0!==e.apply&&void 0!==a[h].apply,d&&(f=Object.create(e),a[h].apply(f,[a].concat(b)),a[h]=f)},c.facets=["simulate","render"],c.prototype.traverse=function(a,b,c){var d,g,h=this[a],i=h&&"function"==typeof h.apply;c=[null].concat(c),i&&(c[0]=e,h.apply(this,c)),d=[],g=this[b],g&&"function"==typeof g.apply&&(d=g.apply(this)||[]);var j=arguments;d.forEach(function(a){a.traverse.apply(a,j)}),i&&(c[0]=f,h.apply(this,c))},c.prototype.simulate=g,c.prototype.getSimulateSubmodels=function(){return this.getSubmodels()},c.prototype.render=g,c.prototype.getRenderSubmodels=function(){return this.getSubmodels()},c.prototype.getSubmodels=function(){return[]},c}),a("strongforce",["./consts","./Loop","./Render","./Simulator","./Model","./EventEmitter"],function(a,b,c,d,e,f){return{consts:a,Loop:b,Render:c,Simulator:d,Model:e,EventEmitter:f}}),d.strongforce});